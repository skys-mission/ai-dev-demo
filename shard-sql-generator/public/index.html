<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分片SQL生成器</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 顶部导航栏 -->
    <header class="navbar">
        <div class="container">
            <div class="navbar-brand">
                <h1>分片SQL生成器</h1>
                <span class="subtitle">Database Shard SQL Generator</span>
            </div>
            <div class="navbar-actions">
                <button id="theme-toggle" class="btn-icon" title="切换主题">
                    <span class="icon">🌙</span>
                </button>
                <button id="help-btn" class="btn-icon" title="帮助">
                    <span class="icon">❓</span>
                </button>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="main-content">
        <div class="container">
            <!-- 左侧：分片规则配置 -->
            <aside class="left-panel">
                <div class="panel-header">
                    <h2>分片规则配置</h2>
                </div>
                
                <div class="panel-content">
                    <!-- 分片算法选择 -->
                    <div class="form-group">
                        <label for="shard-algorithm">分片算法</label>
                        <select id="shard-algorithm" class="form-control">
                            <option value="mod">取模算法 (Mod)</option>
                            <option value="range">范围分片</option>
                            <option value="hash">哈希分片</option>
                            <option value="consistent-hash">一致性哈希</option>
                            <option value="date">日期分片</option>
                            <option value="custom">自定义脚本</option>
                        </select>
                    </div>

                    <!-- 分片算法参数配置 -->
                    <div id="algorithm-params" class="algorithm-params">
                        <!-- 取模算法参数 -->
                        <div class="params-group" data-algorithm="mod">
                            <div class="form-group">
                                <label for="mod-value">模数</label>
                                <input type="number" id="mod-value" class="form-control" value="4" min="1">
                            </div>
                        </div>

                        <!-- 范围分片参数 -->
                        <div class="params-group" data-algorithm="range" style="display: none;">
                            <div class="form-group">
                                <label for="range-rules">范围规则 (JSON格式)</label>
                                <textarea id="range-rules" class="form-control" rows="4">
{
  "rules": [
    { "min": 0, "max": 100000, "shard": 0 },
    { "min": 100001, "max": 200000, "shard": 1 },
    { "min": 200001, "max": 300000, "shard": 2 },
    { "min": 300001, "max": 400000, "shard": 3 }
  ]
}
                                </textarea>
                            </div>
                        </div>

                        <!-- 哈希分片参数 -->
                        <div class="params-group" data-algorithm="hash" style="display: none;">
                            <div class="form-group">
                                <label for="hash-algorithm">哈希算法</label>
                                <select id="hash-algorithm" class="form-control">
                                    <option value="md5">MD5</option>
                                    <option value="sha1">SHA1</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="hash-shards">分片数量</label>
                                <input type="number" id="hash-shards" class="form-control" value="4" min="1">
                            </div>
                        </div>

                        <!-- 一致性哈希参数 -->
                        <div class="params-group" data-algorithm="consistent-hash" style="display: none;">
                            <div class="form-group">
                                <label for="consistent-nodes">物理节点数</label>
                                <input type="number" id="consistent-nodes" class="form-control" value="4" min="1">
                            </div>
                            <div class="form-group">
                                <label for="consistent-virtual">虚拟节点数/物理节点</label>
                                <input type="number" id="consistent-virtual" class="form-control" value="100" min="1">
                            </div>
                        </div>

                        <!-- 日期分片参数 -->
                        <div class="params-group" data-algorithm="date" style="display: none;">
                            <div class="form-group">
                                <label for="date-format">时间格式</label>
                                <select id="date-format" class="form-control">
                                    <option value="YYYY">按年</option>
                                    <option value="YYYYMM">按月</option>
                                    <option value="YYYYMMDD">按日</option>
                                    <option value="YYYYMMDDHH">按小时</option>
                                </select>
                            </div>
                        </div>

                        <!-- 自定义脚本参数 -->
                        <div class="params-group" data-algorithm="custom" style="display: none;">
                            <div class="form-group">
                                <label for="custom-script">自定义脚本</label>
                                <select id="custom-script" class="form-control">
                                    <option value="">请选择脚本</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button id="manage-scripts" class="btn btn-secondary">管理脚本</button>
                            </div>
                        </div>
                    </div>

                    <!-- 分片键配置 -->
                    <div class="form-group">
                        <label for="shard-key">分片键</label>
                        <input type="text" id="shard-key" class="form-control" placeholder="如：user_id">
                    </div>

                    <!-- 分片键值输入 -->
                    <div class="form-group">
                        <label for="shard-values">分片键值 (多个值用换行分隔)</label>
                        <textarea id="shard-values" class="form-control" rows="4" placeholder="1001
1002
1003
1004"></textarea>
                    </div>

                    <!-- 生成按钮 -->
                    <div class="form-actions">
                        <button id="generate-btn" class="btn btn-primary">生成SQL</button>
                        <button id="clear-btn" class="btn btn-secondary">清空</button>
                    </div>
                </div>
            </aside>

            <!-- 中间：SQL输入与预览 -->
            <section class="center-panel">
                <div class="panel-header">
                    <h2>SQL生成</h2>
                </div>
                
                <div class="panel-content">
                    <!-- SQL输入区域 -->
                    <div class="input-section">
                        <div class="section-header">
                            <h3>原始SQL</h3>
                            <div class="section-actions">
                                <button id="format-sql" class="btn btn-sm btn-secondary">格式化</button>
                            </div>
                        </div>
                        <textarea id="sql-input" class="sql-editor" placeholder="请输入SQL语句...

示例：
SELECT * FROM users WHERE user_id = ? AND status = 'active';
UPDATE orders SET amount = 100 WHERE order_id = ?;
DELETE FROM logs WHERE log_id = ?;
INSERT INTO products (id, name) VALUES (?, ?);"></textarea>
                    </div>

                    <!-- SQL输出区域 -->
                    <div class="output-section">
                        <div class="section-header">
                            <h3>生成结果</h3>
                            <div class="section-actions">
                                <button id="copy-all" class="btn btn-sm btn-primary">复制全部</button>
                                <button id="export-results" class="btn btn-sm btn-secondary">导出</button>
                            </div>
                        </div>
                        <div id="sql-output" class="sql-results">
                            <div class="empty-state">
                                <span class="icon">📝</span>
                                <p>输入SQL并配置分片规则，点击生成按钮查看结果</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 右侧：脚本管理与历史记录 -->
            <aside class="right-panel">
                <div class="panel-header">
                    <h2>脚本管理</h2>
                </div>
                
                <div class="panel-content">
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="scripts">脚本列表</button>
                        <button class="tab-btn" data-tab="history">历史记录</button>
                    </div>

                    <!-- 脚本列表 -->
                    <div class="tab-content active" id="scripts-tab">
                        <div id="scripts-list" class="scripts-list">
                            <div class="empty-state">
                                <span class="icon">📁</span>
                                <p>暂无自定义脚本</p>
                            </div>
                        </div>
                        <div class="tab-actions">
                            <button id="add-script" class="btn btn-primary btn-sm">添加脚本</button>
                        </div>
                    </div>

                    <!-- 历史记录 -->
                    <div class="tab-content" id="history-tab">
                        <div id="history-list" class="history-list">
                            <div class="empty-state">
                                <span class="icon">⏰</span>
                                <p>暂无历史记录</p>
                            </div>
                        </div>
                        <div class="tab-actions">
                            <button id="clear-history" class="btn btn-secondary btn-sm">清空历史</button>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 分片SQL生成器 | Database Shard SQL Generator</p>
        </div>
    </footer>

    <!-- 模态框 -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">模态框标题</h3>
                <button id="modal-close" class="btn-icon">
                    <span class="icon">✕</span>
                </button>
            </div>
            <div id="modal-body" class="modal-body">
                <!-- 模态框内容 -->
            </div>
        </div>
    </div>

    <!-- 帮助信息 -->
    <div id="help-content" style="display: none;">
        <h4>使用说明</h4>
        <ol>
            <li>选择合适的分片算法</li>
            <li>配置算法参数</li>
            <li>输入分片键和分片键值</li>
            <li>输入原始SQL语句</li>
            <li>点击"生成SQL"按钮</li>
            <li>在结果区域查看和复制生成的分片SQL</li>
        </ol>
        <h4>支持的分片算法</h4>
        <ul>
            <li><strong>取模算法</strong>：根据分片键值取模计算分片ID</li>
            <li><strong>范围分片</strong>：根据配置的范围规则确定分片</li>
            <li><strong>哈希分片</strong>：对分片键进行哈希计算后取模</li>
            <li><strong>一致性哈希</strong>：支持虚拟节点的一致性哈希算法</li>
            <li><strong>日期分片</strong>：按时间维度（年/月/日/小时）分片</li>
            <li><strong>自定义脚本</strong>：支持用户编写JavaScript分片脚本</li>
        </ul>
    </div>
</body>
<script src="app.js"></script>
</html>